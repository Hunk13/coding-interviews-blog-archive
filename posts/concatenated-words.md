Concatenated Words
==================

Mar 8, 2021 ¬∑ 6 min read

–î–∞–Ω –º–∞—Å—Å–∏–≤ —Å–ª–æ–≤ –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤. –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å—Ä–µ–¥–∏ –Ω–∏—Ö —Ç–∞–∫–∏–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–µ–π –¥—Ä—É–≥–∏—Ö —Å–ª–æ–≤ (–∫–∞–∫ –º–∏–Ω–∏–º—É–º, –¥–≤—É—Ö).

![](/images/concatenated-words--ex.jpg)

–†–µ—à–µ–Ω–∏–µ¬†[#](#—Ä–µ—à–µ–Ω–∏–µ)
---------------------

–ü–æ —Å—É—Ç–∏, –Ω—É–∂–Ω–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä–æ—á–∫—É –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ –∏–∑ —Å–ª–æ–≤–∞—Ä—è. –ü–æ —Ñ–æ—Ä–º–µ –∑–∞–¥–∞—á–∞ –ø–æ—Ö–æ–∂–∞ [–Ω–∞ –ø–æ–∏—Å–∫ –≤ –≥–ª—É–±–∏–Ω—É](/tags/dfs/).

    function canSplit(word, concatsCount = 0) {
      // –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–∏:
      // –Ω–µ—Ç —Å—Ç—Ä–æ–∫–∏, —Ç–æ –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∏–ª–∏ –≤—Å–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã
      if (word.length === 0) {
        // —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å,
        // –µ—Å–ª–∏ –¥–ª—è —ç—Ç–æ–≥–æ —Å–¥–µ–ª–∞–ª–∏ –±–æ–ª—å—à–µ
        // —á–µ–º –æ–¥–Ω—É –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é,
        // (—Ç–æ –µ—Å—Ç—å –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é —Å–∞–º–æ–≥–æ
        // —ç—Ç–æ–≥–æ —Å–ª–æ–≤–∞ —Å –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π)
        // –∞ –∏–Ω–∞—á–µ —ç—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ
        // –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–ª–æ–≤–æ
        return concatsCount > 1;
      }
      for (let i = 0; i < words.length; i++) {
        if (
          // –µ—Å–ª–∏ –Ω–∞—à–ª–∏ —Å–ª–æ–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å–æ–º
          word.indexOf(words[i]) === 0 &&
          // —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø–æ–∏—â–µ–º –∫–∞–∫ —Ä–∞–∑–±–∏—Ç—å –æ—Å—Ç–∞–≤—à—É—é—Å—è —Å—Ç—Ä–æ–∫—É
          canSplit(word.substring(words[i].length), concatsCount + 1)
        ) {
          // –µ—Å–ª–∏ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ ‚Äî –æ—Ç–ª–∏—á–Ω–æ, —Å—Ä–∞–∑—É –≤–µ—Ä–Ω—ë–º true,
          // –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å, —Ç–æ –ø–æ–∏—Å–∫ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å—Å—è
          // –≤ —Ü–∏–∫–ª–µ –≤—ã—à–µ
          return true;
        }
      }
      return false;
    }
    

–í —á–µ–º –ø—Ä–æ–±–ª–µ–º–∞ –¥–∞–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è? –í —Å–∫–æ—Ä–æ—Å—Ç–∏.

–í–æ-–ø–µ—Ä–≤—ã—Ö, –∑–∞–º–µ—Ç–∏–º, —á—Ç–æ –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞ –ø—Ä–µ—Ñ–∏–∫—Å—ã —Å–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –≤ –∫–æ—Ç–æ—Ä–æ–º –∏—â–µ–º. –ü—Ä–µ—Ñ–∏–∫—Å –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ –ø–æ –¥–ª–∏–Ω–µ. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –º–æ–∂–Ω–æ —Å–ª–æ–≤–∞ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–ª–∏–Ω–µ –∏ –æ–±—Ä—ã–≤–∞—Ç—å —Ü–∏–∫–ª –∫–∞–∫ —Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω–∞ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª.

    for (let i = 0; i < words.length; i++) {
    + if (words[i].length > word.length) {
    +   break;
    + }
    }
    

–ü–æ–ø—Ä–æ–±—É–µ–º —Å–¥–∞—Ç—å ‚Äî –ø–æ–ª—É—á–∞–µ–º stackoverflow ü§î

![](/images/concatenated-words--stackoverflow.jpg)

–í —É—Å–ª–æ–≤–∏–∏ —Å–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –¥–ª–∏–Ω–∞ —Å–ª–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å `0 <= words[i].length <= 1000`, –∞ –∑–Ω–∞—á–∏—Ç –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∞. –í —Å–ª—É—á–∞–µ —Å –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π `canSplit` –∑–∞—Ü–∏–∫–ª–∏–≤–∞–µ—Ç—Å—è.

    if (
        // –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –≤—Å–µ–≥–¥–∞ –∑–∞–º–∞—Ç—á–∏—Ç—Å—è –Ω–∞ –Ω–∞—á–∞–ª–æ,
        word.indexOf(words[i]) === 0 &&
        // –∞ substring –æ—Ç –Ω—É–ª—è –¥–∞—ë—Ç —Ç—É –∂–µ —Å—Ç—Ä–æ–∫—É,
        // –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ ‚Äî –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
        canSplit(word.substring(words[i].length), concatsCount + 1)
    )
    

> ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–¥ –Ω–∞ –∫—Ä–∞–µ–≤—ã–µ —Å–ª—É—á–∞–∏, —Ç–æ –µ—Å—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –ø—Ä–∏ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–µ, –∏ –¥–ª–∏–Ω—ã 1000.

–ö—Å—Ç–∞—Ç–∏, —ç—Ç–æ –≤–∞–∂–Ω—ã–π —Å–∏–≥–Ω–∞–ª –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–∞. –ö–æ–¥ –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö, –Ω–æ –∏ –¥–ª—è –∫—Ä–∞–µ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤.

–ü—Ä–∞–≤–∏–º –±–∞–≥:

    if (
    +   words[i].length > 0 &&
        word.indexOf(words[i]) === 0 &&
        canSplit(word.substring(words[i].length), concatsCount + 1)
    )
    

–°–¥–∞—ë–º –∏ –ø–æ–ª—É—á–∞–µ–º TLE ‚Äî —Ç–æ –µ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ.

![](/images/concatenated-words--tle.jpg)

–ì–¥–µ ¬´–±—É—Ç—ã–ª–æ—á–Ω–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ¬ª? –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫? –î–∞, –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —ç—Ç–æ –Ω–µ —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π —Å–ª–æ–Ω –≤ —ç—Ç–æ–π –∫–æ–º–Ω–∞—Ç–µ.

    function canSplit(curr, suffixStart = 0, slicesCount = 0) {
      if (words[curr].length === suffixStart) {
        return slicesCount > 1;
      }
      for (let i = 0; i < words.length; i++) {
        if (words[i].length > words[curr].length) {
          break;
        }
        if (
          words[i].length > 0 &&
          words[curr].indexOf(words[i], suffixStart) === suffixStart &&
          canSplit(curr, suffixStart + words[i].length, slicesCount + 1)
        ) {
          return true;
        }
      }
      return false;
    }
    

–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫ ‚Äî —Å–∞–º–æ –ø–æ —Å–µ–±–µ –Ω–µ–ø–ª–æ—Ö–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ. –û–¥–Ω–∞–∫–æ, –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–¥–∞—Ç—å –ø–æ–ª—É—á–∞–µ–º –≤—Å—ë —Ç–æ—Ç –∂–µ TLE.

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî –ø–æ–∏—Å–∫ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏, –∞ –∏–º–µ–Ω–Ω–æ:

    words[curr].indexOf(words[i], suffixStart) === suffixStart;
    

–¢–æ –µ—Å—Ç—å –º—ã –ø—Ä–æ–±–µ–≥–∞–µ–º—Å—è –ø–æ –≤—Å–µ–º —Å–ª–æ–≤–∞–º, –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–º–∞—Ç—á–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å, —á—Ç–æ –¥–∞—ë—Ç `O(N * M)` —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –≥–¥–µ `N` –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤, –∞ `M` –¥–ª–∏–Ω–∞ —Å–ª–æ–≤–∞. –ò —ç—Ç–æ –Ω–∞ –∫–∞–∂–¥—ã–π `canSplit`!

–ó–¥–µ—Å—å –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥—è—Ç **–ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è** (trie).

–°—É—Ç—å –≤ —Ç–æ–º, —á—Ç–æ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–µ—Ä–µ–≤–æ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –ø—Ä–µ—Ñ–∏–∫—Å—ã —Å–ª–æ–∂–∞—Ç—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—É—Ç–∏ –≤ —ç—Ç–æ–º –¥–µ—Ä–µ–≤–µ.

![](/images/concatenated-words--trie.jpg)

–ù–∞–º –Ω–µ –ø—Ä–∏–¥—ë—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ –±–µ–≥–∞—Ç—å –ø–æ –≤—Å–µ–º —Å–ª–æ–≤–∞–º –≤ –ø–æ–∏—Å–∫–µ –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–π—Ç–∏ –ø—É—Ç—å –≤ —ç—Ç–æ–º –¥–µ—Ä–µ–≤–µ –¥–æ —É–∑–ª–∞ `isLeaf` (—Ç–æ –µ—Å—Ç—å –∫–æ–Ω—Ü–∞ —Å–ª–æ–≤–∞)!

–ú–Ω–µ —ç—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å –æ–≥—Ä–æ–º–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å–ª–æ–≤, –∏ –º—ã –∏—Ö —Å–ª–æ–∂–∏–ª–∏ –æ–¥–Ω–æ –Ω–∞ –¥—Ä—É–≥–æ–µ, —Ç–∞–∫ —á—Ç–æ –æ–±—â–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã —Ä–∞–∑–Ω—ã—Ö —Å–ª–æ–≤ ¬´—Ä–∞—Å—Ç–≤–æ—Ä–∏–ª–∏—Å—å¬ª –≤ —ç—Ç–æ–º –¥–µ—Ä–µ–≤–µ.

–ù–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä: dog, cat, dogcatdog

![](/images/concatenated-words--ex.jpg)

–ú—ã —Å–ø–µ—Ä–≤–∞ –Ω–∞–π–¥–µ–º –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è –¥–æ `g`, —Ç–æ –µ—Å—Ç—å —Å–ª–æ–≤–æ `dog`. –î–∞–ª–µ–µ –ø—Ä–æ–¥–æ–ª–∂–∏–º –ø–æ–∏—Å–∫ –¥–ª—è —Å—É—Ñ—Ñ–∏–∫—Å–∞ `catdog`, —Å–Ω–æ–≤–∞ –æ—Ç –∫–æ—Ä–Ω—è –¥–µ—Ä–µ–≤–∞. –ò —Ç–∞–∫ –¥–∞–ª–µ–µ.

–ù–∞–π–¥–µ—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å –∏–ª–∏ –Ω–µ—Ç ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ –¥–æ–π–¥—ë–º –ª–∏ –º—ã –¥–æ —É–∑–ª–∞ `isLeaf` –∏–ª–∏ –ø—Ä–∏–¥—ë–º –≤ —Ç—É–ø–∏–∫, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –≤ —Å–ª–æ–≤–∞—Ä–µ –Ω–µ –±—ã–ª–æ —Å–ª–æ–≤ —Å —Ç–∞–∫–∏–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º.

    /**
     * –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã–º –¥–µ—Ä–µ–≤–æ–º.
     * –°–æ–¥–µ—Ä–∂–∏–º –æ–¥–∏–Ω –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ.
     */
    class Trie {
      root = new Node("");
      // –¥–æ–±–∞–≤–ª—è–µ–º —É–∫–∞–∑–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –≤ –¥–µ—Ä–µ–≤–æ
      add(word) {
        let curr = this.root;
    
        for (let i = 0; i < word.length; i++) {
          curr = curr.addNext(word[i]);
        }
        curr.isLeaf = true;
      }
    }
    
    /**
     * –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–∑–ª–æ–º.
     * –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ –∏—Å–∫–∞—Ç—å –ø–æ –¥–µ—Ç–∫–∞–º.
     */
    class Node {
      isLeaf = false;
      children = new Array(26);
      constructor(val) {
        this.val = val;
      }
      // –¥–æ–±–∞–≤–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–π —É–∑–µ–ª
      addNext(val) {
        const idx = this._idx(val);
        if (!this.children[idx]) {
          this.children[idx] = new Node(val);
        }
        return this.children[idx];
      }
      // –∏—â–µ–º —É–∫–∞–∑–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª
      getNext(val) {
        return this.children[this._idx(val)];
      }
      _idx(val) {
        return val.charCodeAt(0) - "a".charCodeAt(0);
      }
    }
    

–¢–æ–≥–¥–∞ `canSplit` –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.

    function canSplit(curr, suffixStart = 0, slicesCount = 0) {
      if (words[curr].length == suffixStart) {
        return slicesCount > 1;
      }
      // –Ω–∞—á–∏–Ω–∞–µ–º –ø–æ–∏—Å–∫ –æ—Ç –∫–æ—Ä–Ω—è –¥–µ—Ä–µ–≤–∞,
      // –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∫–µ–π—Å —Å –ø—É—Å—Ç–æ–π
      // —Å—Ç—Ä–æ–∫–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
      // –∫–æ—Ä–µ–Ω—å –¥–µ—Ä–µ–≤–∞ –∏ –µ—Å—Ç—å –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞,
      // –∏ –º—ã –Ω–∞—á–∏–Ω–∞–µ–º –ø–æ–∏—Å–∫ —Å–æ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞ –Ω–µ–π
      // —Å–∏–º–≤–æ–ª–∞—Ö
      let node = trie.root;
    
      // –∏—â–µ–º, –Ω–∞—á–∏–Ω–∞—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
      for (let i = suffixStart; i < words[curr].length; i++) {
        // –±–µ—Ä–µ–º –æ—á–µ—Ä–µ–¥–Ω–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
        node = node.getNext(words[curr][i]);
        // –µ—Å—Ç—å –ª–∏ —Å–ª–µ–¥—É—é—â–∞—è –±—É–∫–≤–∞ —Å—Ä–µ–¥–∏ –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤?
        // –µ—Å–ª–∏ –∑–∞—à–ª–∏ –≤ —Ç—É–ø–∏–∫ ‚Äî –¥–∞–ª—å—à–µ –∏—Å–∫–∞—Ç—å —Å–º—ã—Å–ª–∞ –Ω–µ—Ç
        if (!node) {
          return false;
        }
        // isLeaf –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π
        // –ø—Ä–µ—Ñ–∏–∫—Å –±—ã–ª —Å—Ä–µ–¥–∏ —Å–ª–æ–≤ –≤ —Å–ª–æ–≤–∞—Ä–µ,
        // –∑–Ω–∞—á–∏—Ç –Ω–∞—á–∏–Ω–∞—è –æ—Ç—Å—é–¥–∞ –Ω–∞–¥–æ –ø–æ–∏—Å–∫–∞—Ç—å
        // —Ä–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª—è —Å—É—Ñ—Ñ–∏–∫—Å–∞
        if (node.isLeaf && canSplit(curr, i + 1, slicesCount + 1)) {
          return true;
        }
      }
      return false;
    }
    

–¢–µ–ø–µ—Ä—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –≥–ª—É–±–∏–Ω–æ–π –¥–µ—Ä–µ–≤–∞, —Ç–æ –µ—Å—Ç—å —Å–∞–º—ã–º –¥–ª–∏–Ω—ã–º —Å–ª–æ–≤–æ–º! –≠—Ç–æ –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ —á–µ–º –¥—ë—Ä–≥–∞—Ç—å `indexOf` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞ –∏–∑ —Å–ø–∏—Å–∫–∞.

–í—Å—ë –≤–º–µ—Å—Ç–µ.

    /**
     * @param {string[]} words
     * @return {string[]}
     */
    var findAllConcatenatedWordsInADict = function(words) {
      const trie = new Trie();
    
      function canSplit(curr, suffixStart = 0, slicesCount = 0) {
        if (words[curr].length == suffixStart) {
          return slicesCount > 1;
        }
        let node = trie.root;
    
        for (let i = suffixStart; i < words[curr].length; i++) {
          node = node.getNext(words[curr][i]);
          if (!node) {
            return false;
          }
          if (
              node.isLeaf &&
              canSplit(curr, i + 1, slicesCount + 1)
            ) {
            return true;
          }
        }
        return false;
      }
      const result = [];
    
      words.sort((a, b) => a.length - b.length);
    
      for (let i = 0; i < words.length; i++) {
        // —Ç—Ä—é–∫ —Å –æ—Ç—Å–µ—á–µ–Ω–∏–µ–º –ø–æ–∏—Å–∫–∞
        // –ø–æ –∑–∞–≤–µ–¥–æ–º–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –ø—Ä–µ—Ñ–∏–∫—Å–∞–º
        // –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –¥–µ—Ä–µ–≤–æ —Ç–æ–ª—å–∫–æ —Å–ª–æ–≤–∞,
        // –∫–æ—Ç–æ—Ä—ã–µ –∫–æ—Ä–æ—á–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º–æ–≥–æ
        if (canSplit(i)) {
          result.push(words[i]);
        } else {
          trie.add(words[i]);
        }
      }
      return result;
    };
    
    class Trie {
      // ...
    }
    
    class Node {
      // ...
    }
    

![](/images/concatenated-words--result.jpg)

PS. –û–±—Å—É–¥–∏—Ç—å –º–æ–∂–Ω–æ –≤ [—Ç–µ–ª–µ–≥—Ä–∞–º-—á–∞—Ç–µ](https://t.me/ctci_chat_ru) –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. Welcome! ü§ó

–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ [–º–æ–π —Ç–≤–∏—Ç–µ—Ä](https://twitter.com/vitkarpov) –∏–ª–∏ [–∫–∞–Ω–∞–ª –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ](https://t.me/coding_interviews), —á—Ç–æ–±—ã —É–∑–Ω–∞–≤–∞—Ç—å –æ –Ω–æ–≤—ã—Ö —Ä–∞–∑–±–æ—Ä–∞—Ö –∑–∞–¥–∞—á.
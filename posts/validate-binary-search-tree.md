Validate Binary Search Tree
===========================

Mar 15, 2021 ¬∑ 3 min read

–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –¥–≤–æ–∏—á–Ω—ã–º –¥–µ—Ä–µ–≤–æ–º –ø–æ–∏—Å–∫–∞.

–ü–æ –æ–ø—Ä–µ–¥–µ–ª–∏–Ω–∏—é, —ç—Ç–æ —Ç–∞–∫–æ–µ –¥–µ—Ä–µ–≤–æ, —á—Ç–æ:

*   –ª—é–±–æ–µ _–ª–µ–≤–æ–µ_ –ø–æ–¥–¥–µ—Ä–µ–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∑–ª—ã —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ _–º–µ–Ω—å—à–µ_ —Å–≤–æ–µ–≥–æ –∫–æ—Ä–Ω—è;
*   –ª—é–±–æ–µ _–ø—Ä–∞–≤–æ–µ_ –ø–æ–¥–¥–µ—Ä–µ–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∑–ª—ã —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ _–±–æ–ª—å—à–µ_ —Å–≤–æ–µ–≥–æ –∫–æ—Ä–Ω—è;
*   —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–µ—Ä–Ω–æ –¥–ª—è –ª—é–±–æ–≥–æ —É–∑–ª–∞ –≤ –¥–µ—Ä–µ–≤–µ.

–ü—Ä–∏–º–µ—Ä:

![](/images/validate-binary-search-tree--ex.jpg)

–î–µ—Ä–µ–≤–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –ø—Ä–∞–≤–æ–º –ø–æ–¥–¥–µ—Ä–µ–≤–µ –æ—Ç –∫–æ—Ä–Ω—è –æ–±–Ω–∞—Ä—É–∂–∏–ª—Å—è —É–∑–µ–ª —Å –º–µ–Ω—å—à–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º, –∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ —Å—Ç—Ä–æ–≥–æ –±–æ–ª—å—à–µ.

[–ó–∞–¥–∞—á–∞ –Ω–∞ LeetCode](https://leetcode.com/problems/validate-binary-search-tree/).

–†–µ—à–µ–Ω–∏–µ¬†[#](#—Ä–µ—à–µ–Ω–∏–µ)
---------------------

–ò–∑ —É—Å–ª–æ–≤–∏—è —Å—Ä–∞–∑—É –±—Ä–æ—Å–∞–µ—Ç—Å—è –≤ –≥–ª–∞–∑–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –ø—Ä–∏—Ä–æ–¥–∞ –∑–∞–¥–∞—á–∏.

–ü–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –ª—é–±–æ–π —É–∑–µ–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∞–º –ø–æ —Å–µ–±–µ –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–µ—Ä–µ–≤–æ–º –ø–æ–∏—Å–∫–∞, –∞ –∑–Ω–∞—á–∏—Ç —Ä–µ—à–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–∏—Ç—å –∫–∞–∫-—Ç–æ —Ç–∞–∫:

    var isValidBST = function(root) {
      // ... –∫–∞–∫–æ–π-—Ç–æ –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π
      return isValidBST(root.left) && isValidBST(root.right);
    };
    

–ë–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π ‚Äî —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π, —Ç–æ –µ—Å—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–∑–ª–∞ —Å—á–∏—Ç–∞–µ–º –≤–∞–ª–∏–¥–Ω—ã–º –¥–µ—Ä–µ–≤–æ–º. –ò –¥–∞–ª–µ–µ –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∞–∑–º–∞—Ç—ã–≤–∞—Ç—å —Å—Ç–µ–∫ —Ä–µ–∫—É—Ä—Å–∏–∏ –Ω–∞–≤–µ—Ä—Ö.

–ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –¥–µ—Ä–µ–≤–æ –ø–µ—Ä–µ—Å—Ç–∞–ª–æ –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º? –ù–∞—Ä—É—à–∏–ª—Å—è –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç. –ê –∏–º–µ–Ω–Ω–æ –¥–ª—è _–ª—é–±–æ–≥–æ —É–∑–ª–∞_ –µ–≥–æ –¥–µ—Ç–∫–∏ –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–µ—Ç–µ–π –Ω–∞ –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –Ω—É–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª.

–ö–∞–∂–µ—Ç—Å—è, –≤—ã—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

    function helper(root, min, max) {
      if (!root) {
        return true;
      }
      if (min < root.val && root.val < max) {
        return (
          helper(root.left, min, root.val) && helper(root.right, root.val, max)
        );
      }
      return false;
    }
    

–ü–æ —Å—É—Ç–∏, –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø–æ–∏—Å–∫ –≤ –≥–ª—É–±–∏–Ω—É. –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –º—ã –º–µ–Ω—è–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª (min, max). –ï—Å–ª–∏ –∏–¥—ë–º –≤ –ª–µ–≤–æ–µ –ø–æ–¥–¥–µ—Ä–µ–≤–æ ‚Äî –±–æ–ª—å—à–µ –Ω–µ –º–æ–∂–µ–º –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å —É–∑–ª—ã —Å –±–æ–ª—å—à–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —á–µ–º –∫–æ—Ä–µ–Ω—å, —Ç–æ –µ—Å—Ç—å –º–µ–Ω—è–µ–º max. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∏ –¥–ª—è –ø—Ä–∞–≤–æ–≥–æ –ø–æ–¥–¥–µ—Ä–µ–≤–∞, —Ç–æ –µ—Å—Ç—å –º–µ–Ω—è–µ–º min.

    /**
     * Definition for a binary tree node.
     * function TreeNode(val) {
     *     this.val = val;
     *     this.left = this.right = null;
     * }
     */
    /**
     * @param {TreeNode} root
     * @return {boolean}
     */
    var isValidBST = function(root) {
      function helper(root, min, max) {
        // –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π
        if (!root) {
          return true;
        }
        // –∏–¥—ë–º –¥–∞–ª—å—à–µ —Ç–æ–ª—å–∫–æ
        // –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç
        if (min < root.val && root.val < max) {
          return (
            helper(root.left, min, root.val) && helper(root.right, root.val, max)
          );
        }
        return false;
      }
      // –∑–∞–ø—É—Å—Ç–∏–º —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ
      // —à–∏—Ä–æ–∫–∏–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º,
      // —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ
      // –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ –¥–ª—è –ª—é–±–æ–≥–æ –∫–æ—Ä–Ω—è
      return helper(root, -Infinity, Infinity);
    };
    

–£ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –µ—Å—Ç—å –∏ –¥—Ä—É–≥–æ–µ, –¥–æ–≤–æ–ª—å–Ω–æ –ª—é–±–æ–ø—ã—Ç–Ω–æ–µ, —Ä–µ—à–µ–Ω–∏–µ. –ü–æ–ø—Ä–æ–±—É–µ–º —Å–ø–µ—Ä–≤–∞ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —É–∑–ª–æ–≤, –æ–±—Ö–æ–¥—è –¥–µ—Ä–µ–≤–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.

    function inorder(root) {
      if (!root) {
        return;
      }
      inorder(root.left);
      console.log(root.val);
      inorder(root.right);
    }
    

–ó–Ω–∞—á–µ–Ω–∏—è –±—É–¥—É—Ç –≤—ã–≤–µ–¥–µ–Ω—ã –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ. –≠—Ç–æ –Ω–µ —Å–ª—É—á–∞–π–Ω–æ. –¢–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –æ–±—Ö–æ–¥–∞: –ø–æ—Å–µ—Ç–∏—Ç—å –ª–µ–≤—ã–π —É–∑–µ–ª, –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å, –ø–æ—Å–µ—Ç–∏—Ç—å –ø—Ä–∞–≤—ã–π —É–∑–µ–ª ‚Äî inorder, –∫–∞–∫ —Ä–∞–∑ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –¥–∞—ë—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –¥–ª—è –≤–∞–ª–∏–¥–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞ –ø–æ–∏—Å–∫–∞.

–ï—Å–ª–∏ —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –Ω–∞—Ä—É—à–∞–µ—Ç—Å—è ‚Äî –∑–Ω–∞—á–∏—Ç –¥–µ—Ä–µ–≤–æ –Ω–µ –±—ã–ª–æ –≤–∞–ª–∏–¥–Ω—ã–º, —á—Ç–æ –∫–∞–∫ —Ä–∞–∑ –∏ –¥–∞—ë—Ç —Ä–µ—à–µ–Ω–∏–µ.

    /**
     * Definition for a binary tree node.
     * function TreeNode(val) {
     *     this.val = val;
     *     this.left = this.right = null;
     * }
     */
    /**
     * @param {TreeNode} root
     * @return {boolean}
     */
    var isValidBST = function(root) {
      let prev = -Infinity;
      function inorder(root) {
        // –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
        if (!root) {
          return true;
        }
        // inorder –≤–∞—Ä–∏–∞–Ω—Ç –æ–±—Ö–æ–¥–∞ –∑–Ω–∞—á–∏—Ç:
        // - –∏–¥—ë–º –Ω–∞–ª–µ–≤–æ
        // - —á—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ–º (–ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç)
        // - –∏–¥—ë–º –Ω–∞–ø—Ä–∞–≤–æ
        if (!inorder(root.left)) {
          return false;
        }
        // –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞—Ä—É—à–µ–Ω
        if (root.val <= prev) {
          return false;
        }
        // –µ—Å–ª–∏ —Å–º–æ–≥–ª–∏ –∑–¥–µ—Å—å –æ–∫–∞–∑–∞—Ç—å—Å—è,
        // –∑–Ω–∞—á–∏—Ç –≤—Å–µ ¬´–ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É–∑–ª—ã¬ª
        // –±—ã–ª–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã, –∏ –ø–æ—Ä–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è
        prev = root.val;
        return inorder(root.right);
      }
      return inorder(root);
    };
    

> [–ü–æ–¥—Ä–æ–±–Ω–µ–µ](https://www.geeksforgeeks.org/tree-traversals-inorder-preorder-and-postorder/) –ø—Ä–æ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–±—Ö–æ–¥–∞ –¥–µ—Ä–µ–≤–∞ –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã.

PS. –û–±—Å—É–¥–∏—Ç—å –º–æ–∂–Ω–æ –≤ [—Ç–µ–ª–µ–≥—Ä–∞–º-—á–∞—Ç–µ](https://t.me/ctci_chat_ru) –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. Welcome! ü§ó

–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ [–º–æ–π —Ç–≤–∏—Ç–µ—Ä](https://twitter.com/vitkarpov) –∏–ª–∏ [–∫–∞–Ω–∞–ª –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ](https://t.me/coding_interviews), —á—Ç–æ–±—ã —É–∑–Ω–∞–≤–∞—Ç—å –æ –Ω–æ–≤—ã—Ö —Ä–∞–∑–±–æ—Ä–∞—Ö –∑–∞–¥–∞—á.
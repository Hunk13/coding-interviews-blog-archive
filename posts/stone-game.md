Stone Game
==========

Aug 3, 2020 ¬∑ 5 min read

–ê–ª–∏—Å–∞ –∏ –ë–æ–± –∏–≥—Ä–∞—é—Ç –≤ –∏–≥—Ä—É. –ï—Å—Ç—å —Å—Ç–æ–ø–∫–∞ –∏–∑ `n` –∫–∞–º–Ω–µ–π. –ê–ª–∏—Å–∞ —Ö–æ–¥–∏—Ç –ø–µ—Ä–≤–æ–π –∏ –º–æ–∂–µ—Ç —Å–Ω—è—Ç—å —Å–æ —Å—Ç–æ–ø–∫–∏ _–ª—é–±–æ–µ_ –Ω–µ–Ω—É–ª–µ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–º–Ω–µ–π, –∫–æ—Ç–æ—Ä–æ–µ —è–≤–ª—è–µ—Ç—Å—è _–∫–≤–∞–¥—Ä–∞—Ç–æ–º –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–≥–æ —á–∏—Å–ª–∞_ (1, 4, 9, 16, ‚Ä¶).

–†–∞–∑—É–º–µ–µ—Ç—Å—è –Ω–µ–ª—å–∑—è —Å–Ω—è—Ç—å –∫–∞–º–Ω–µ–π –±–æ–ª—å—à–µ, —á–µ–º –µ—Å—Ç—å –≤ —Å—Ç–æ–ø–∫–µ. –î–∞–ª—å—à–µ —Ö–æ–¥–∏—Ç –ë–æ–± –∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ —Å–¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ —Å–∞–º–æ–µ. –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç —Ç–æ—Ç, –∫—Ç–æ –Ω–µ –º–æ–∂–µ—Ç —Å–Ω—è—Ç—å –Ω–∏ –æ–¥–Ω–æ–≥–æ –∫–∞–º–Ω—è.

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ –∏–≥—Ä–æ–∫–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, —É–∑–Ω–∞—Ç—å —Å–º–æ–∂–µ—Ç –ª–∏ –ø–æ–±–µ–¥–∏—Ç—å –ê–ª–∏—Å–∞?

–†–µ—à–µ–Ω–∏–µ¬†[#](#—Ä–µ—à–µ–Ω–∏–µ)
---------------------

–í–æ-–ø–µ—Ä–≤—ã—Ö, —Å—Ç–æ–∏—Ç –ø–æ–Ω—è—Ç—å —É—Å–ª–æ–≤–∏–µ –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —É—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç, —Ç.–µ. —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç ¬´–Ω–µ –º–æ–∂–µ—Ç —Å–Ω—è—Ç—å –Ω–∏ –æ–¥–Ω–æ–≥–æ –∫–∞–º–Ω—è¬ª. –≠—Ç–æ –±—É–∫–≤–∞–ª—å–Ω–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–æ–ª—å –∫–∞–º–Ω–µ–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–Ω–∞—á–µ –º—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ–º —Å–Ω—è—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω –∫–∞–º–µ–Ω—å –∏ –æ–±—è–∑–∞–Ω—ã —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π —Ö–æ–¥.

–í–æ-–≤—Ç–æ—Ä—ã—Ö, —á—Ç–æ –∑–Ω–∞—á–∏—Ç ¬´–∏–≥—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ¬ª. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –∏–≥—Ä–æ–∫–∏ –ø—Ä–æ—Å—á–∏—Ç—ã–≤–∞—é—Ç –≤—Å–µ –±—É–¥—É—â–∏–µ —Ö–æ–¥—ã –Ω–∞–ø–µ—Ä—ë–¥ –∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –Ω–∞–∏–±–æ–ª–µ–µ –≤—ã–≥–æ–¥–Ω–æ–µ –¥–ª—è —Å–µ–±—è —Ä–µ—à–µ–Ω–∏–µ. –ü–æ —Å—É—Ç–∏, –µ—Å–ª–∏ –ê–ª–∏—Å–∞ –º–æ–∂–µ—Ç –≤—ã–∏–≥—Ä–∞—Ç—å ‚Äî –æ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∏–≥—Ä–∞–µ—Ç.

–ü–µ—Ä–≤–æ–µ, —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –≥–æ–ª–æ–≤—É ‚Äî –ø–æ–∏—Å–∫ –≤ –≥–ª—É–±–∏–Ω—É. –í—Å—ë –∏–≥—Ä—É –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –¥–µ—Ä–µ–≤–æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ö–æ–¥–æ–≤. –°–∫–∞–∂–µ–º, –¥–ª—è `n = 4` –º–æ–∂–Ω–æ —Å–Ω—è—Ç—å 1 –∫–∞–º–µ–Ω—å –∏–ª–∏ 4, –¥–∞–ª–µ–µ –∏–∑ –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –º–æ–∂–Ω–æ –æ–ø—è—Ç—å –∂–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω—è—Ç—å —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–º–Ω–µ–π. –ï—Å–ª–∏ –≤ —ç—Ç–æ–º –¥–µ—Ä–µ–≤–µ –µ—Å—Ç—å –ø—É—Ç—å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ª–∏—Å—Ç—É –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö–æ–¥–∏—Ç –ë–æ–±, –∞ —Ç–∞–º –Ω–æ–ª—å –∫–∞–º–Ω–µ–π ‚Äî –∑–Ω–∞—á–∏—Ç –æ–Ω –ø—Ä–æ–∏–≥—Ä–∞–ª –∏ –ê–ª–∏—Å–∞ –ø–æ–±–µ–∂–¥–∞–µ—Ç.

```js
/**
 * @param {number} n
 * @return {boolean}
 */
var winnerSquareGame = function(n) {
  // –ø–æ–∏—Å–∫ –≤ –≥–ª—É–±–∏–Ω—É,
  // –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–º–Ω–µ–π –∏ —á–µ–π —Å–µ–π—á–∞—Å —Ö–æ–¥
  function loose(n, current) {
    // –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∫–≤–∞–¥—Ä–∞—Ç—ã –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —á–∏—Å–µ–ª
    // –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ–∏—Å–∫ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–º–Ω–µ–π
    for (let i = 1; i * i <= n; i++) {
      // —á–µ–π —Å–ª–µ–¥—É—é—â–∏–π —Ö–æ–¥?
      const next = current === 'A' ? 'B' : 'A';
      // –µ—Å–ª–∏ –≤ –¥–∞–Ω–Ω–æ–π –≤–µ—Ç–∫–µ –ù–ï –ø—Ä–æ–∏–≥—Ä–∞–ª —Ç–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫,
      // —Ç–æ –ø—Ä–æ–∏–≥—Ä–∞–ª —Å–ª–µ–¥—É—é—â–∏–π
      if (loose(n - i * i, next) !== current) {
        return next;
      }
    }
    // –µ—Å–ª–∏ –Ω–∏ –ø—Ä–∏ –æ–¥–Ω–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ —Ö–æ–¥–∞ —Å–ª–µ–¥—É—é—â–∏–π –Ω–µ —Å–º–æ–≥ –ø—Ä–æ–∏–≥—Ä–∞—Ç—å,
    // —Ç.–µ. –≤–æ –≤—Å–µ—Ö –≤–µ—Ç–∫–∞—Ö –¥–µ—Ä–µ–≤–∞, –≤ –∏—Ç–æ–≥–µ, –æ–Ω –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç,
    // —Ç–æ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫
    return current;
  }
  // –ê–ª–∏—Å–∞ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç –µ—Å–ª–∏ –ø—Ä–æ–∏–≥—Ä–∞–ª –ë–æ–±
  return loose(n, 'A') === 'B';
};
```
    

–í –ø—Ä–∏–Ω—Ü–∏–ø–µ, –ø–∏—Å–∞—Ç—å –∫–æ–¥ –±—ã–ª–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ú–æ–∂–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å –∑–∞—Ä–∞–Ω–µ–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö `n <= 10^5` —Å–º—ã—Å–ª–∞ –≤ —ç—Ç–æ–º –Ω–µ—Ç.

–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –∫–∞–∂–¥—ã–π —É–∑–µ–ª –≤ —Ç–∞–∫–æ–º –¥–µ—Ä–µ–≤–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å –¥–µ—Ç–æ–∫ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª –¥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–º–Ω–µ–π –≤ —ç—Ç–æ–º —É–∑–ª–µ. –û—Ü–µ–Ω–∏–º —Ö—É–¥—à–∏–π —Å–ª—É—á–∞–µ, –ø—Ä–∏ `n = 1e5`:

```js
let counter = 0;
for (let i = 1; i * i <= 1e5; i++) {
    counter++;
}
// 316
console.log(counter);
```

–ü–æ–ª—É—á–∞–µ—Ç—Å—è, –æ—Ç —Å–∞–º–æ–≥–æ –∫–æ—Ä–Ω—è –¥–µ—Ä–µ–≤–∞ —É –Ω–∞—Å –±—É–¥–µ—Ç 316 —É–∑–ª–æ–≤, –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞, —Å —É–º–µ–Ω—å—à–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–∑–ª–æ–≤ –Ω–∞ –æ–¥–∏–Ω —Å –∫–∞–∂–¥—ã–º —Å–ª–µ–¥—É—é—â–∏–º —É—Ä–æ–≤–Ω–µ–º. –≠—Ç–æ —è–≤–Ω–æ **–∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–Ω—ã–π –≤–∑—Ä—ã–≤**.

–ú–æ–∂–Ω–æ –ø–æ—Å—Ç—É–ø–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º [–∑–∞–¥–∞—á–µ –ø—Ä–æ –¥–æ–º–∏–Ω–æ –∏ —Ç—Ä–∏–º–∏–Ω–æ](/posts/domino-and-tromino-tiling.md) –æ–±—Ä–∞–∑–æ–º –∏ –≤–∫—Ä—É—Ç–∏—Ç—å –∫—ç—à, **–º–µ–º–æ–∏–∑–∞—Ü–∏—é**. –í –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ –Ω–∞–º –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –ø–æ–±–µ–¥–∏—Ç –ª–∏ –ê–ª–∏—Å–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–º–Ω–µ–π, —ç—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –∏ –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–º–Ω–µ–π.

![](/images/stone-game--tree.jpg)

> –î–ª—è –∏–Ω—Ç–µ—Ä–µ—Å–∞ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–∫—Ä—É—Ç–∏—Ç—å –∫—ç—à —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –î–µ–ª–∏—Ç–µ—Å—å –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏ [–≤ —á–∞—Ç–µ](https://t.me/ctci_chat_ru)! ;-)

–û–¥–Ω–∞–∫–æ, –¥–∞–≤–∞–π—Ç–µ –≤ —ç—Ç–æ—Ç —Ä–∞–∑ —Ä–∞–∑–±–µ—Ä—ë–º –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥, _‚Äúbottom-down‚Äù –≤–∞—Ä–∏–∞–Ω—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è_.

–í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –Ω–∞–¥–æ –æ—á–∏—Å—Ç–∏—Ç—å —Ä–∞–∑—É–º, –∫–∞–∫ –≤ —Ñ–∏–ª—å–º–µ ¬´–ú–∞—Ç—Ä–∏—Ü–∞¬ª, –∏ –∑–∞–π—Ç–∏ —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã. –ê —á—Ç–æ –µ—Å–ª–∏ –º—ã –º–æ–∂–µ–º —Ä–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö `n`, –∞ –¥–ª—è `n + 1` –∏ –¥–∞–ª–µ–µ ‚Äî **–ø–æ—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–≤–µ—Ç –∏–∑ —Ç–æ–≥–æ, —á—Ç–æ —É –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å**. –ü—Ä–æ–±—É–µ–º –ø–æ–¥–Ω—è—Ç—å—Å—è —Å–Ω–∏–∑—É –Ω–∞–≤–µ—Ä—Ö, –æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫ –±–æ–ª—å—à–µ–º—É, –∞ –Ω–µ –Ω–∞–æ–±–æ—Ä–æ—Ç. –û—Ç—Å—é–¥–∞ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è ‚Äútop-down‚Äù –∏ ‚Äúbottom-up‚Äù.

–¢—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π. –î–ª—è `n = 1` –ê–ª–∏—Å–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç: —Å–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –∫–∞–º–µ–Ω—å –∏ –ë–æ–± –Ω–µ –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ö–æ–¥–∞. –ö–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ—à–µ–Ω–∏—é –¥–ª—è `n + 1`?

–ù–∞–¥–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫–≤–∞–¥—Ä–∞—Ç—ã –æ—Ç `1` –¥–æ `n`. –ï—Å–ª–∏ –≥–¥–µ-—Ç–æ –µ—Å—Ç—å `false` —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞—á–∏–Ω–∞—è —Å —ç—Ç–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–º–Ω–µ–π –∏–≥—Ä–æ–∫ –ø—Ä–æ–∏–≥—Ä–∞–µ—Ç, —Ç.–µ. –≤—Å—ë –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è —Ç–µ–º, —á—Ç–æ –æ–Ω –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –±–µ–∑ –∫–∞–º–Ω–µ–π. –ó–Ω–∞—á–∏—Ç –µ—Å–ª–∏ –ê–ª–∏—Å–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ –≤ —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∞ —Å–ª–µ–¥—É—é—â–∏–π —Ö–æ–¥ –æ–±—è–∑–∞–Ω —Å–¥–µ–ª–∞—Ç—å –ë–æ–±, —Ç–æ –ø—Ä–æ–∏–≥—Ä–∞–µ—Ç –æ–Ω! –≠—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `true`, —Ç.–µ. –ê–ª–∏—Å–∞ –≤—ã–∏–≥—Ä–∞–µ—Ç.

–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, —ç—Ç–æ –∏ –µ—Å—Ç—å –≤–µ—Å—å –∞–ª–≥–æ—Ä–∏—Ç–º. –ü–æ–ª—É—á–∞–µ—Ç—Å—è `O(n^1.5)` ‚Äî –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `n` –Ω—É–∂–Ω–æ –±–µ–≥–∞—Ç—å –ø–æ –∫–≤–∞–¥—Ä–∞—Ç–∞–º (–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ—Ä–µ–Ω—å –∏–∑ `n`).

```js
/**
 * @param {number} n
 * @return {boolean}
 */
var winnerSquareGame = function(n) {
  // dp[i] ‚Äî –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
  // –∫–∞–º–Ω–µ–π –ê–ª–∏—Å–∞ –ø–æ–±–µ–∂–¥–∞–µ—Ç (true) –∏–ª–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç (false)
  const dp = new Array(n + 1).fill(false);
  // —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π,
  // —Ç–æ—á–Ω–æ –∑–Ω–∞–µ–º, —á—Ç–æ –ê–ª–∏—Å–∞ –≤—ã–∏–≥—Ä–∞–µ—Ç
  dp[1] = true;

  // —Ä–µ—à–∞–µ–º –∑–∞–¥–∞—á—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∏—Å–ª–∞ 2..n,
  // —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
  // –¥–æ–±–∏—Ä–∞—è—Å—å –¥–æ n ‚Äî –Ω—É–∂–Ω–æ–≥–æ –Ω–∞–º –æ—Ç–≤–µ—Ç–∞
  for (let i = 2; i <= n; i++) {
    // –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∫–≤–∞–¥—Ä–∞—Ç—ã,
    // —Ç.–µ. —á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –ø–æ–ø—Ä–æ–±—É–µ–º —Å–Ω—è—Ç—å
    // —Ç–∞–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–º–Ω–µ–π ‚Äî —Å–¥–µ–ª–∞—Ç—å —Ö–æ–¥
    for (let j = 1; j * j <= i; j++) {
      // –µ—Å–ª–∏ —Ç–∞–º false –¥–µ–ª–∞–µ–º —Ö–æ–¥ —Ç—É–¥–∞, —Ç–∞–∫
      // –º—ã –∑–∞—Å—Ç–∞–≤–∏–º –ë–æ–±–∞ –ø—Ä–æ–∏–≥—Ä–∞—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ
      // –æ–Ω –Ω–∞—á–Ω—ë—Ç —Ö–æ–¥–∏—Ç—å —Å –∑–∞–≤–µ–¥–æ–º–æ –Ω–µ–≤—ã–≥–æ–¥–Ω–æ–≥–æ
      // –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–º–Ω–µ–π
      if (!dp[i - j * j]) {
        dp[i] = true;
      }
    }
  }
  return dp[n];
};
```

![](/images/stone-game--solution1.jpg)

–ú–æ–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ —É—Å–∫–æ—Ä–∏—Ç—å—Å—è, –Ω–∞–ø–∏—Å–∞–≤ –≤—Å–µ–≥–æ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –∫–æ–¥–∞.

```js
for (let j = 1; j * j <= i; j++) {
  // –µ—Å–ª–∏ —Ç–∞–º false –¥–µ–ª–∞–µ–º —Ö–æ–¥ —Ç—É–¥–∞, —Ç–∞–∫
  // –º—ã –∑–∞—Å—Ç–∞–≤–∏–º –ë–æ–±–∞ –ø—Ä–æ–∏–≥—Ä–∞—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ
  // –æ–Ω –Ω–∞—á–Ω—ë—Ç —Ö–æ–¥–∏—Ç—å —Å –∑–∞–≤–µ–¥–æ–º–æ –Ω–µ–≤—ã–≥–æ–¥–Ω–æ–≥–æ
  // –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–º–Ω–µ–π
  if (!dp[i - j * j]) {
    dp[i] = true;
+   break;
  }
}
```

–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –Ω–∞–º –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –∏–≥—Ä—ã –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –ê–ª–∏—Å–∞ –≤—ã–∏–≥—Ä–∞–µ—Ç. –ï—Å–ª–∏ –∏—Ö –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî –Ω–∞–º —ç—Ç–æ –Ω–µ –≤–∞–∂–Ω–æ, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ –Ω–µ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –≤—Å–µ –∫–≤–∞–¥—Ä–∞—Ç—ã –¥–æ —Ç–µ–∫—É—â–µ–≥–æ `n`.

![](/images/stone-game--solution2.jpg)

PS. –û–±—Å—É–¥–∏—Ç—å –º–æ–∂–Ω–æ –≤ [—Ç–µ–ª–µ–≥—Ä–∞–º-—á–∞—Ç–µ](https://t.me/ctci_chat_ru) –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. Welcome! ü§ó

–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ [–º–æ–π —Ç–≤–∏—Ç–µ—Ä](https://twitter.com/vitkarpov) –∏–ª–∏ [–∫–∞–Ω–∞–ª –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ](https://t.me/coding_interviews), —á—Ç–æ–±—ã —É–∑–Ω–∞–≤–∞—Ç—å –æ –Ω–æ–≤—ã—Ö —Ä–∞–∑–±–æ—Ä–∞—Ö –∑–∞–¥–∞—á.
Serialize and Deserialize Binary Tree
=====================================

Sep 28, 2020 ¬∑ 2 min read

–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏ –≤ –≤–∏–¥–µ –Ω–∞–±–æ—Ä–∞ –±–∏—Ç–∏–∫–æ–≤, —Ç–∞–∫ —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–æ —Å–µ—Ç–∏ –∏–ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –¥–∏—Å–∫ –∏ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –Ω–∞–∑–∞–¥ –≤ –∏—Å—Ö–æ–¥–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.

–í —ç—Ç–æ–π –∑–∞–¥–∞—á–µ –Ω—É–∂–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ.

[–ó–∞–¥–∞—á–∞ –Ω–∞ LeetCode](https://leetcode.com/problems/serialize-and-deserialize-binary-tree/).

–†–µ—à–µ–Ω–∏–µ¬†[#](#—Ä–µ—à–µ–Ω–∏–µ)
---------------------

–û—Ç–ª–∏—á–Ω–∞—è –∑–∞–¥–∞—á–∫–∞ –Ω–∞ —Ä–µ–∫—É—Ä—Å–∏—é. –ë—É–¥–µ–º —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –≤ —Å—Ç—Ä–æ–∫—É (–¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏ –≤—ã–±–∏—Ä–∞—é—Ç –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –Ω–æ –¥–ª—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –ª—É—á—à–µ –≤–∑—è—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π ‚Äî –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏).

–ß—Ç–æ–±—ã —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–µ—Ä–µ–≤–æ –µ–≥–æ –Ω—É–∂–Ω–æ –∫–∞–∫-—Ç–æ –æ–±–æ–π—Ç–∏, –µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã ‚Äî –ø–æ–¥—Ä–æ–±–Ω–µ–µ —è –ø–∏—Å–∞–ª –≤ [—Ä–∞–∑–±–æ—Ä–µ –∑–∞–¥–∞—á–∏ –ø—Ä–æ –æ–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞](https://www.notion.so/N-ary-Tree-Preorder-Traversal-9a0c58cfd47b42898bf48ec056904acb).

–í–æ–∑—å–º—ë–º preorder –≤–∞—Ä–∏–∞–Ω—Ç –æ–±—Ö–æ–¥–∞, —Å–æ–±–µ—Ä—ë–º –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –º–∞—Å—Å–∏–≤, —Å–∫–ª–µ–∏–º –º–∞—Å—Å–∏–≤ –≤ —Å—Ç—Ä–æ—á–∫—É —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º (—á—Ç–æ–±—ã –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –±—ã–ª–æ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –Ω–∞–∑–∞–¥). –í–æ—Ç –∏ –≤—Å—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è.

```js
/**
 * –°–µ–∞—Ä–∏–ª–∏–∑—É–µ—Ç –±–∏–Ω–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –≤ —Å—Ç—Ä–æ–∫—É.
 *
 * @param {TreeNode} root
 * @return {string}
 */
var serialize = function(root) {
  const result = [];
  // —É–¥–æ–±–Ω–æ —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ result,
  // –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ —á–µ—Ä–µ–∑ –≤—Å–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã,
  // –∞ –ø–æ—Å–ª–µ —Å–∫–ª–µ–∏–º –≤—Å—ë –≤ —Å—Ç—Ä–æ–∫—É
  serializeHelper(root, result);
  return result.join('|');
};

/**
 * @param {TreeNode} root
 * @param {String[]} result
 * @return {void}
 */
function serializeHelper(root, result) {
  // –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π ‚Äî —Å–∞–º—ã–π –Ω–∏–∑ –≤–µ—Ç–∫–∏ –¥–µ—Ä–µ–≤–∞,
  // –¥–∞–ª—å—à–µ –∏–¥—Ç–∏ –Ω–µ–∫—É–¥–∞, –¥–æ–±–∞–≤–∏–º –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª ¬´end of tree¬ª.
  // –í—ã–±—Ä–∞—Ç—å –º–æ–∂–Ω–æ –ª—é–±–æ–π —Å–∏–º–≤–æ–ª.
  if (root === null) {
    result.push('$');
    return;
  }
  // preorder –≤–∞—Ä–∏–∞–Ω—Ç –æ–±—Ö–æ–¥–∞,
  // —Å–æ–±–∏—Ä–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ, –∏–¥—ë–º —Å–ø–µ—Ä–≤–∞ –≤ –ª–µ–≤—É—é, –ø–æ—Ç–æ–º –≤ –ø—Ä–∞–≤—É—é –≤–µ—Ç–∫–∏ ‚Äî –ø–æ–∏—Å–∫ –≤ –≥–ª—É–±–∏–Ω—É
  result.push(root.val);
  serializeHelper(root.left, result);
  serializeHelper(root.right, result);
}
```
    

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å ‚Äî –∫–∞–∫ –∏–∑ —Å—Ç—Ä–æ–∫–∏ –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ö–æ–¥–Ω–æ–µ –¥–µ—Ä–µ–≤–æ. –ò–¥—ë–º –æ—Ç –æ–±—Ä–∞—Ç–Ω–æ–≥–æ:

*   –¥–µ–ª–∏–º —Å—Ç—Ä–æ—á–∫—É –ø–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—é, –ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
*   –Ω–∞—á–∏–Ω–∞–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–∑–ª—ã –¥–µ—Ä–µ–≤–∞, —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ö–æ–¥—è –º–∞—Å—Å–∏–≤

```js
/**
 * –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É –Ω–∞–∑–∞–¥ –≤ –¥–µ—Ä–µ–≤–æ.
 *
 * @param {string} data
 * @return {TreeNode}
 */
var deserialize = function(data) {
  // —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤ ‚Äî –ø–æ–ª—É—á–∏–º —Å—Ç–µ–∫,
  // —É–¥–æ–±–Ω–æ —Å–Ω–∏–º–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –æ–¥–Ω–æ–º—É —Å –≤–µ—Ä—à–∏–Ω—ã —Å—Ç–µ–∫–∞
  return deserializeHelper(data.split('|').reverse());
};

function deserializeHelper(vals) {
  // –≤–µ—Ä—à–∏–Ω–∞ —Å—Ç–µ–∫–∞ (pop –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ —Å–Ω–∏–º–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç)
  const val = vals.pop();
  // —Ç–æ—Ç —Å–∞–º—ã–π —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª ¬´–∫–æ–Ω–µ—Ü –≤–µ—Ç–∫–∏ –¥–µ—Ä–µ–≤–∞¬ª
  if (val === '$') {
    return null;
  }
  // —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —É–∑–µ–ª —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –Ω–∞ –≤–µ—Ä—à–∏–Ω–µ —Å—Ç–µ–∫–∞
  const node = new TreeNode(val);
  // –¥–µ—Ä–≥–∞–µ–º —Ä–µ–∫—É—Ä—Å–∏—é –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ, —á—Ç–æ –∏ –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (preorder)
  node.left = deserializeHelper(vals);
  node.right = deserializeHelper(vals);
  return node;
}
```

–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è ‚Äî –ª–∏–Ω–µ–π–Ω–∞—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–∑–ª–æ–≤, –∫–∞–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, —Ç–∞–∫ –∏ –ø–æ –ø–∞–º—è—Ç–∏, —Ç.–∫. –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–æ–π—Ç–∏ –≤—Å–µ —É–∑–ª—ã –¥–µ—Ä–µ–≤–∞.

![](/images/serialize-and-deserialize-binary-tree--result.jpg)

PS. –û–±—Å—É–¥–∏—Ç—å –º–æ–∂–Ω–æ –≤ [—Ç–µ–ª–µ–≥—Ä–∞–º-—á–∞—Ç–µ](https://t.me/ctci_chat_ru) –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. Welcome! ü§ó

–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ [–º–æ–π —Ç–≤–∏—Ç–µ—Ä](https://twitter.com/vitkarpov) –∏–ª–∏ [–∫–∞–Ω–∞–ª –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ](https://t.me/coding_interviews), —á—Ç–æ–±—ã —É–∑–Ω–∞–≤–∞—Ç—å –æ –Ω–æ–≤—ã—Ö —Ä–∞–∑–±–æ—Ä–∞—Ö –∑–∞–¥–∞—á.